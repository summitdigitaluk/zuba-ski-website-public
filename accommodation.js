"use strict";(()=>{function j(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}else return Array.from(e)}var N=!1;typeof window!="undefined"&&(D={get passive(){N=!0}},window.addEventListener("testPassive",null,D),window.removeEventListener("testPassive",null,D));var D,T=typeof window!="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),v=[],M=!1,P=-1,b=void 0,f=void 0,S=void 0,R=function(t){return v.some(function(o){return!!(o.options.allowTouchMove&&o.options.allowTouchMove(t))})},C=function(t){var o=t||window.event;return R(o.target)||o.touches.length>1?!0:(o.preventDefault&&o.preventDefault(),!1)},X=function(t){if(S===void 0){var o=!!t&&t.reserveScrollBarGap===!0,n=window.innerWidth-document.documentElement.clientWidth;if(o&&n>0){var r=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);S=document.body.style.paddingRight,document.body.style.paddingRight=r+n+"px"}}b===void 0&&(b=document.body.style.overflow,document.body.style.overflow="hidden")},Q=function(){S!==void 0&&(document.body.style.paddingRight=S,S=void 0),b!==void 0&&(document.body.style.overflow=b,b=void 0)},ee=function(){return window.requestAnimationFrame(function(){if(f===void 0){f={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,o=t.scrollY,n=t.scrollX,r=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-o,document.body.style.left=-n,setTimeout(function(){return window.requestAnimationFrame(function(){var s=r-window.innerHeight;s&&o>=r&&(document.body.style.top=-(o+s))})},300)}})},te=function(){if(f!==void 0){var t=-parseInt(document.body.style.top,10),o=-parseInt(document.body.style.left,10);document.body.style.position=f.position,document.body.style.top=f.top,document.body.style.left=f.left,window.scrollTo(o,t),f=void 0}},oe=function(t){return t?t.scrollHeight-t.scrollTop<=t.clientHeight:!1},ne=function(t,o){var n=t.targetTouches[0].clientY-P;return R(t.target)?!1:o&&o.scrollTop===0&&n>0||oe(o)&&n<0?C(t):(t.stopPropagation(),!0)},U=function(t,o){if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!v.some(function(r){return r.targetElement===t})){var n={targetElement:t,options:o||{}};v=[].concat(j(v),[n]),T?ee():X(o),T&&(t.ontouchstart=function(r){r.targetTouches.length===1&&(P=r.targetTouches[0].clientY)},t.ontouchmove=function(r){r.targetTouches.length===1&&ne(r,t)},M||(document.addEventListener("touchmove",C,N?{passive:!1}:void 0),M=!0))}};var z=function(t){if(!t){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}v=v.filter(function(o){return o.targetElement!==t}),T&&(t.ontouchstart=null,t.ontouchmove=null,M&&v.length===0&&(document.removeEventListener("touchmove",C,N?{passive:!1}:void 0),M=!1)),T?te():Q()};var _=(e,t)=>{if(document.getElementById(e)){let o=document.getElementById(e);U(o,{reserveScrollBarGap:!0});let n=$(o);n.find(".modal_loading").removeClass("is-loaded"),n.removeClass("is-closed").addClass("is-opening");let r=n.find(".modal_background");r.fadeIn(350),t&&t(),setTimeout(function(){n.removeClass("is-opening").addClass("is-open"),o.querySelector(".modal_content").scroll(0,0),r.on("click",function(){O(e)})},350)}},O=e=>{if(document.getElementById(e)){let t=$("#"+e);t.removeClass("is-open").addClass("is-closing"),t.find(".modal_background").fadeOut(200),setTimeout(function(){t.removeClass("is-closing").addClass("is-closed"),t.find(".modal_loading").addClass("is-loaded");let o=document.getElementById(e);z(o)},200)}},H=()=>{$("[s-modal-open]").on("click",function(){let e=$(this).attr("s-modal-open");_(e)}),$("[s-modal-close]").on("click",function(){let e=$(this).attr("s-modal-close");O(e)}),$(".modal_close").each(function(){$(this).on("click",function(e){e.preventDefault();var t=$(e.target).closest(".modal_component").attr("id");O(t)})})};var x=e=>{for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},F=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null;var I=()=>localStorage.getItem("enquiry")?JSON.parse(localStorage.getItem("enquiry")):(localStorage.setItem("enquiry",JSON.stringify(J)),J);var G=(e,t)=>{let o=I();o[e]=t,localStorage.setItem("enquiry",JSON.stringify(o))},re=e=>new Date(e.setHours(0,0,0,0)),me=re(new Date);var ae={adults:1,children:[],doubleBeds:0,singleBeds:0,cots:0},J={activity:2,arrivalDate:!1,departureDate:!1,rooms:[ae],airportTransfer:!1,mountainGuiding:!1,heliskiing:!1,skiPasses:!1,equipmentRental:!1,skiSchool:!1,client:{title:"",forename:"",surname:"",email:"",phone:""},comments:"",howHear:"",suppliers:{},whatsApp:!1},W=e=>e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,o){return o==0?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"");var V=e=>new Promise((t,o)=>{if(document.querySelector(`link[href="${e}"]`)){t();return}fetch(e).then(r=>r.json()).then(r=>{t(r)}).catch(r=>o(new Error(`Error loading ${e}: ${r.message}`)))}),q=e=>{let t=e.split(".");if(t.length>=2){let o=t.pop();return[t.join("."),o]}return null};var Y=()=>{Object.keys(I().suppliers).forEach(e=>{console.log(e),$('.filter_added[data-item-id="'+e+'"]').css("opacity",1)}),se()},se=()=>{let e=Object.keys(I().suppliers).length,t=$("#enquiryCount");e>0?t.text("Complete Enquiry ("+e+")"):t.text("Make an Enquiry")};var K=()=>{let e=o=>{let n;localStorage.getItem("suppliers")&&typeof localStorage.getItem("suppliers")!="undefined"&&F(JSON.parse(localStorage.getItem("suppliers")))===!0&&Date.now()-new Date(Number(JSON.parse(localStorage.getItem("suppliers")).lastUpdated)).getTime()<9e5?(n=JSON.parse(localStorage.getItem("suppliers")),console.log("suppliers from local",n),o(n)):V(["https://europe-west3-zuba-webflow.cloudfunctions.net/getSuppliers"]).then(r=>{n=r,console.log("suppliers from firebase",n),n.lastUpdated=Date.now().toString(),localStorage.setItem("suppliers",JSON.stringify(n)),o(n)}).catch(r=>{console.error(r)})};$('[s-modal-open="suggested"]').on("click",function(){t($(this))});let t=o=>{let n=o.attr("s-modal-open");$("#"+n).find(".modal_loading").removeClass("is-loaded"),_(n),e(s=>{s=s.details,console.log("suppliers",s);let h=I().suppliers,u=o.attr("data-item-id");if(x(s[u])===!1){let l={};l.name=s[u].name,l.resort=s[u].resort,l.url=s[u].url;let i=s[u].img,a=q(i);a!==null?(console.log("File Name:",a[0]),console.log("Extension:",a[1]),i=a[0]+"-p-500."+a[1]):console.log("Invalid Image URL"),l.img=i,l.checked=!0,h[u]=l,G("suppliers",h),$(".added_image").attr("src",l.img),$(".added_hotel").text(l.name+", "+l.resort)}let A=s[u]["related-accommodation-ref"];console.log("related",A);let d={};if($.each(A,function(l,i){console.log("value",i);let a=i,m=x(h[a])===!0,p=x(s[a])===!1;if(m&&p){console.log("foo");let c={};c.name=s[a].name,c.resort=s[a].resort,c.url=s[a].url,c.img=s[a].img,c.boarding=s[a].boarding,console.log("supplier",c),d[a]=c}}),console.log("enquirySuppliers",h),console.log("relatedSuppliers",d),x(d)===!1){$(".suggested_block").show(),$(".suggested_list").empty();let l=0;for(let i in d){l+=1;let a=d[i].img,m=q(a);m!==null?a=m[0]+"-p-500."+m[1]:console.log("Invalid Image URL"),$(".suggested_list").append('<div class="suggested_item" id="'+i+'"><a class="fill-link" href="'+d[i].url+'"></a><div class="suggested_figure"><img src="'+a+'" alt="'+d[i].name+'" loading="lazy" class="fill-image"><div class="shadow-overlay"></div></div><div class="suggested_body"><div class="suggested_header"><div class="filter_title"><h4 class="suggested_name">'+d[i].name+'</h4></div></div><div class="suggested_text-wrapper"><div class="filter_resort-link is-small w-inline-block"><div class="icon-1x1-xsmall w-embed"><svg aria-hidden="true" fill="currentColor" role="img" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Location</title><path d="m10 9c.6 0 1.1-.2 1.5-.6s.6-.9.6-1.5-.2-1.1-.6-1.5c-.8-.8-2.2-.8-3 0-.4.4-.6.9-.6 1.5s.2 1.1.6 1.5.9.6 1.5.6z"></path><path d="m15.7 17.7h-11.4c-.3 0-.6.1-.8.3s-.3.5-.3.8.1.6.3.8c.2.3.4.4.8.4h11.5c.3 0 .6-.1.8-.3s.3-.5.3-.8-.1-.6-.3-.8c-.3-.3-.5-.4-.9-.4z"></path><path d="m9.1 16c.1.1.3.2.4.3.2.1.3.1.5.1s.3 0 .5-.1.3-.1.4-.2c1.3-1 2.6-2.3 3.9-3.8s2-3.3 2-5.2c0-1.1-.2-2.2-.6-3-.4-.9-1-1.6-1.6-2.2-.7-.6-1.4-1-2.2-1.3-1.6-.6-3.2-.6-4.8 0-.8.1-1.6.6-2.2 1.2-.7.6-1.3 1.3-1.7 2.2s-.6 1.9-.6 3c0 1.9.7 3.6 2 5.2 1.3 1.5 2.7 2.8 4 3.8zm-3.7-9c0-.9.2-1.6.5-2.2s.7-1 1.1-1.4c.5-.4 1-.7 1.5-.8.5-.2 1-.3 1.5-.3s.9.1 1.5.3c.5.1 1 .4 1.5.8s.8.9 1.2 1.5c.3.6.5 1.3.5 2.2 0 1-.4 2.1-1.2 3.2s-1.9 2.3-3.4 3.5c-1.5-1.2-2.6-2.4-3.4-3.5-.9-1.2-1.3-2.3-1.3-3.3z"></path></svg></div><div>'+d[i].resort+"</div></div></div></div></div>")}}else $(".suggested_block").hide();$("#"+n).find(".modal_loading").addClass("is-loaded"),Y()})}};function le(){let e=document.getElementById("map"),t=document.getElementById("placeName").innerHTML,o=e.getAttribute("data-zoom")&&e.getAttribute("data-zoom")!==""?Number(e.getAttribute("data-zoom")):14,n=Number(e.getAttribute("data-map-lat")),r=Number(e.getAttribute("data-map-lng")),s=e.getAttribute("data-marker-lat")&&e.getAttribute("data-marker-lat")!==""?Number(e.getAttribute("data-marker-lat")):n,h=e.getAttribute("data-marker-lng")&&e.getAttribute("data-marker-lng")!==""?Number(e.getAttribute("data-marker-lng")):r,u=e.getAttribute("data-ski-lift-lat")&&e.getAttribute("data-ski-lift-lat")!==""?Number(e.getAttribute("data-ski-lift-lat")):null,B=e.getAttribute("data-ski-lift-lng")&&e.getAttribute("data-ski-lift-lng")!==""?Number(e.getAttribute("data-ski-lift-lng")):null,A=new google.maps.LatLng(n,r),d=new google.maps.Map(e,{zoom:o,center:A,mapId:"b0249619239fa08f",mapTypeControl:!1,mapTypeId:"roadmap",scrollwheel:!1,zoomControl:!0,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,draggable:!0});ie(d,[[t,s,h,1]]),function(){let l=u!==null&&B!==null?u+","+B:!1;if(l){let a=document.getElementById("skiLiftRequiresTransfer").innerHTML.toLowerCase(),m=a==="true"?"transfer":"walk";var i=new google.maps.DistanceMatrixService;i.getDistanceMatrix({origins:[{lat:n,lng:r}],destinations:[l],travelMode:a==="true"?"DRIVING":"WALKING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(p,c){if(c!=="OK")console.log("Google Maps error: "+c);else{var k=p.originAddresses;console.log(k);var E=p.destinationAddresses;console.log(E);var y=document.getElementById("distanceToSkiLift");y.innerHTML="";for(var w=0;w<k.length;w++){var g=p.rows[w].elements;console.log(g);for(var L=0;L<g.length;L++)y.innerHTML+=g[L].distance.text+" ("+g[L].duration.text+" "+m+")"}}})}else{let a=document.getElementById("skiLift");a&&a.remove()}}(),function(){let l={geneva:"Geneva Airport, Switzerland",turinCaselle:"Turin Caselle Airport, Italy",milanLinate:"Milan Linate Airport, Italy",milanBergamo:"Milan Bergamo Airport, Italy",milanMalpensa:"Milan Malpensa Airport, Italy"},i=W(document.getElementById("nearestAirport").innerHTML),a=l[i];var m=new google.maps.DistanceMatrixService;m.getDistanceMatrix({origins:[{lat:n,lng:r}],destinations:[a],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(p,c){if(c!=="OK")console.log("Google Maps error: "+c);else{var k=p.originAddresses,E=document.getElementById("transferTime");E.innerHTML="";for(var y=0;y<k.length;y++)for(var w=p.rows[y].elements,g=0;g<w.length;g++)E.innerHTML+=w[g].duration.text}})}()}function ie(e,t){let o={url:"https://uploads-ssl.webflow.com/62cdb1d040dc8c2af67a35e2/65424682dbcb40a84b02df58_zuba-map-pin-blue.svg",size:new google.maps.Size(28,38),scaledSize:new google.maps.Size(28,38),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(14,38)},n={coords:[0,0,0,27,27,27,27,0],type:"poly"};for(let r=0;r<t.length;r++){let s=t[r];new google.maps.Marker({position:{lat:s[1],lng:s[2]},map:e,icon:o,shape:n,title:s[0],zIndex:s[3],animation:google.maps.Animation.DROP})}}window.initMap=le;window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{$(".hero-gallery_sub-grid .hero-gallery_item").on("click",function(){let e=$(this).index();console.log(e),$("#hidden-hero-gallery").find(".w-dyn-item").eq(e).find(".w-lightbox").trigger("click")}),H(),K()});})();
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
